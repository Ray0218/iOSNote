function ACFeedStatistics(){this.feedsurl="/kb/index?page=feedstatistics";this.params=new Object();this.params.locale=headerObj.podLocaleValue;this.store=new Persist.Store("FeedStats");ACFeedStatistics.callbackSuccess=function(a){if(typeof console!="undefined"){console.log("Send Successful")}}}ACFeedStatistics.prototype.updateNotViewedForSuggestedSearch=function(b){if(this.store.get("lastQuerySuggestedSearch")!==b&&this.store.get("resultActivity")=="false"&&this.store.get("sentNotViewed")=="false"){var a=new Object(this.params);a.feedType="notviewed";a.query=this.store.get("lastQuery");this.store.set("sentNotViewed",true);this.sendRequest(a)}};ACFeedStatistics.prototype.updateAdvanceSearchPage=function(b,a){this.store.set("resultActivity",false);this.store.set("lastQuery",a);this.store.set("nextPage",false);this.store.set("sentNotViewed",false)};ACFeedStatistics.prototype.updateSearched=function(e,b,a,c){if(this.store.get("lastQuery")!==null&&this.store.get("resultActivity")=="false"&&this.store.get("sentNotViewed")=="false"){this.updateNotViewed()}this.store.set("resultActivity",false);this.store.set("lastQuery",b);this.store.set("nextPage",false);var d=new Object(this.params);d.feedType=ACSearch.feedType;d.hasResults=e;d.query=b;if(ACSearch.searchState.requestid!=undefined){d.requestId=ACSearch.searchState.requestid}else{d.requestId=""}d.isArchived=a;if(""!=c){d.categoryFilter=c}else{d.categoryFilter="none"}if(this.store.get("hasSuggestion")=="true"){d.lastSuggestions=encodeURIComponent(this.store.get("lastSuggested"));this.store.set("hasSuggestion","false")}else{if(this.store.get("hasSuggestedSuggestion")=="true"){d.lastSuggestions=encodeURIComponent(this.store.get("lastSuggestedSearch"));this.store.set("hasSuggestedSuggestion",false)}else{d.lastSuggestions="{}"}}this.sendRequest(d);this.store.set("sentNotViewed",false)};ACFeedStatistics.prototype.updatePageChange=function(c,b,d){if(this.params.hasResults!=undefined){delete this.params.hasResults}var a=new Object(this.params);a.feedType="pageChange";a.query=c;if(ACSearch.searchState.requestid!=undefined){a.requestId=ACSearch.searchState.requestid}else{a.requestId=""}a.srcPageNumber=ACSearch.searchState.PrevPageNumber;a.targetPageNumber=ACSearch.searchState.currentPage;a.isArchived=b;if(""!=d){a.categoryFilter=d}else{a.categoryFilter="none"}this.sendRequest(a);if(this.params.srcPageNumber!=undefined){delete this.params.srcPageNumber}if(this.params.targetPageNumber!=undefined){delete this.params.targetPageNumber}};ACFeedStatistics.prototype.updateNextPage=function(){if(this.store.get("nextPage")=="false"){var a=new Object(this.params);a.feedType="nextpage";a.query=this.store.get("lastQuery");this.sendRequest(a)}this.store.set("nextPage",true)};ACFeedStatistics.prototype.updateNotViewed=function(c,a,d){if(this.store.get("searchDone")=="false"){if(this.store.get("lastQuery")!==this.store.get("lastSuggestedQuery")&&this.store.get("resultActivity")=="false"&&this.store.get("sentNotViewed")=="false"){if(this.params.hasResults!=undefined){delete this.params.hasResults}if(this.params.lastSuggestions!=undefined){delete this.params.lastSuggestions}var b=new Object(this.params);b.feedType="notviewed";b.query=c;if(ACSearch.searchState.requestid!=undefined){b.requestId=ACSearch.searchState.requestid}else{b.requestId=""}b.isArchived=a;if(""!=d){b.categoryFilter=d}else{b.categoryFilter="none"}this.sendRequest(b)}}};ACFeedStatistics.prototype.updateResultActivity=function(a){this.store.set("resultActivity",true);this.store.set("position",a)};ACFeedStatistics.prototype.updateNotRead=function(b,a,c){var d=new Object(this.params);d.feedType="notread";d.articleID=b;d.query=this.store.get("lastQuery");d.position=a;d.timeSpent=c;if(this.store.get("requestId")!=null&&this.store.get("requestId")!=""){d.requestId=this.store.get("requestId")}this.sendSyncRequest(d)};ACFeedStatistics.prototype.updateRead=function(b,a,d){var c=new Object(this.params);c.feedType="read";c.articleID=b;c.query=this.store.get("lastQuery");c.position=a;c.timeSpent=d;if(this.store.get("requestId")!=null&&this.store.get("requestId")!=""){c.requestId=this.store.get("requestId")}if(this.store.get("creationDate")!=null){c.createdate=this.store.get("creationDate")}if(this.store.get("lastModifiedDate")!=null){c.lastmodifieddate=this.store.get("lastModifiedDate")}this.sendSyncRequest(c)};ACFeedStatistics.prototype.loadListeners=function(e){try{var b=this;var f=$$("li.SearchResult a");for(var c=0;c<f.length;c++){var a=e-15+c+1;f[c].id=a;Event.observe(f[c],"mousedown",function(g){b.updateResultActivity(this.id)})}}catch(d){if(typeof console!="undefined"){console.log("Error: "+d)}}};ACFeedStatistics.prototype.callbackSuccess=function(a){if(typeof console!="undefined"){console.log("Send Successful")}};ACFeedStatistics.prototype.callbackFailure=function(){if(typeof console!="undefined"){console.log("Send Failure")}};ACFeedStatistics.prototype.sendRequest=function(e){var a=this.feedsurl;for(var c in e){var d=encodeURIComponent(e[c]);a=a+"&"+c+"="+d}a=a+"&callback=ACFeedStatistics.callbackSuccess";var b=document.getElementsByTagName("head")[0];script=document.createElement("script");script.id="xdShortcutContainer";script.type="text/javascript";script.src=a;b.appendChild(script)};ACFeedStatistics.prototype.sendSyncRequest=function(e){var b=this.feedsurl;for(var c in e){var d=encodeURIComponent(e[c]);b=b+"&"+c+"="+d}var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.open("GET",b,false);a.send()};ACFeedStatistics.prototype.updateReadHaiku=function(c,b,a,e){var d=new Object(this.params);d.feedType="read";d.haikuid=c;d.articleID=b;if(this.store.get("lastQuery")!=null&&this.store.get("lastQuery")!=""){d.query=this.store.get("lastQuery")}d.position=a;d.timeSpent=e;if(this.store.get("requestId")!=null&&this.store.get("requestId")!=""){d.requestId=this.store.get("requestId")}if(this.store.get("creationDate")!=null){d.createdate=this.store.get("creationDate")}if(this.store.get("lastModifiedDate")!=null){d.lastmodifieddate=this.store.get("lastModifiedDate")}this.sendSyncRequest(d)};ACFeedStatistics.prototype.updateNotReadHaiku=function(c,b,a,d){var e=new Object(this.params);e.feedType="notread";e.haikuid=c;e.articleID=b;if(this.store.get("lastQuery")!=null&&this.store.get("lastQuery")!=""){e.query=this.store.get("lastQuery")}e.position=a;e.timeSpent=d;if(this.store.get("requestId")!=null&&this.store.get("requestId")!=""){e.requestId=this.store.get("requestId")}this.sendSyncRequest(e)};