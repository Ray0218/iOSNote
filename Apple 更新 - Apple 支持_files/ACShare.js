var ikbToolbar={toolbarObjectsList:[],transition:{defaultDuration:200},addToolbarObject:function(a){this.toolbarObjectsList.push(a)},autoCloseDialogs:function(a){this.toolbarObjectsList.each(function(b){var c=b.getDOM();try{if((a&&c!=a)&&c.hasClassName("open")){b.hide()}}catch(d){}})}};var ACEmail={getDOM:function(){return $("email-popup")},open:function(){var b=this.getDOM();var a=b.down(".container").offsetHeight+18;b.blur();if(!b.hasClassName("open")){ikbToolbar.autoCloseDialogs(b);b.addClassName("open");b.style.height=a+"px";$("email-address").focus()}else{if((!$("email-send").visible())&&(!$("email-sent").visible())){this.hide()}}},hide:function(){var a=this.getDOM();a.removeClassName("open");a.style.height="0px"},send:function(){$("email-form").hide();$("email-send").show();var c=document.getElementById("docid").value;var a=document.getElementById("strlocale").value;var d=document.getElementById("email-address").value;if(!ACEmail.validate(d.trim())){ACEmail.invalidEmailId("error");return}else{var b="/kb/index?page=email_template&locale="+a+"&id="+c+"&recipient="+d;new Ajax.Request(b,{method:"get",onSuccess:function(e){ACEmail.done(e)},onFailure:function(){ACEmail.error()}})}},validate:function(a){var b=/^([A-Za-z0-9_\-\.\$])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{1,4})$/;return b.test(a)},invalidEmailId:function(){alert("Please enter a valid email id.");$("email-send").hide();ACEmail.hideSent()},done:function(a){if((!(a.readyState==4&&a.status==200))){ACEmail.error("error");return}$("email-send").hide();$("email-sent").style.display="block";window.setTimeout("ACEmail.hideSent()",3000)},error:function(){alert("There was an error sending the email.");$("email-send").hide();ACEmail.hideSent()},emailDSError:function(a){alert(a)},hideSent:function(){$("email-sent").hide();ACEmail.hide();$("email-form").show()},callInProgress:function(a){switch(a.readyState){case 1:case 2:case 3:return true;break;default:return false;break}}};var ACShare={getDOM:function(){return $("share-popup")},open:function(){var b=this.getDOM();b.down(".container").style.display="block";b.down(".fang").style.display="block";var a=b.down(".container").offsetHeight+18;if(!b.hasClassName("open")){ikbToolbar.autoCloseDialogs(b);b.addClassName("open");b.style.height=a+"px";b.down(".container").style.display="block";b.down(".fang").style.display="block";b.focus()}else{this.hide()}},hide:function(){var a=this.getDOM();a.removeClassName("open");a.style.height="0px";a.down(".container").style.display="none";a.down(".fang").style.display="none"}};ikbToolbar.addToolbarObject(ACEmail);ikbToolbar.addToolbarObject(ACShare);