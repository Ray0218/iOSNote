(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!="undefined"){a=new GearsFactory()}else{try{a=new ActiveXObject("Gears.Factory");if(a.getBuildInfo().indexOf("ie_mobile")!=-1){a.privateSetGlobalObject(this)}}catch(b){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:a}}})();Persist=(function(){var j="0.3.0",d,b,g,h,e,f;f=(function(){var s="Thu, 01-Jan-1970 00:00:01 GMT",l=1000*60*60*24,t=["expires","path","domain"],n=escape,m=unescape,q=document,o;var u=function(){var v=new Date();v.setTime(v.getTime());return v};var k=function(z,C){var y,x,B,A=[],w=(arguments.length>2)?arguments[2]:{};A.push(n(z)+"="+n(C));for(var v=0;v<t.length;v++){x=t[v];B=w[x];if(B){A.push(x+"="+B)}}if(w.secure){A.push("secure")}return A.join("; ")};var p=function(){var x="__EC_TEST__",w=new Date();w=w.toGMTString();this.set(x,w);this.enabled=(this.remove(x)==w);return this.enabled};o={set:function(D,z){var w=(arguments.length>2)?arguments[2]:{},x=u(),C,B={};if(w.expires){var y=w.expires*l;B.expires=new Date(x.getTime()+y);B.expires=B.expires.toGMTString()}var E=["path","domain","secure"];for(var A=0;A<E.length;A++){if(w[E[A]]){B[E[A]]=w[E[A]]}}var v=k(D,z,B);q.cookie=v;return z},has:function(w){w=n(w);var z=q.cookie,y=z.indexOf(w+"="),v=y+w.length+1,x=z.substring(0,w.length);return((!y&&w!=x)||y<0)?false:true},get:function(x){x=n(x);var A=q.cookie,z=A.indexOf(x+"="),v=z+x.length+1,y=A.substring(0,x.length),w;if((!z&&x!=y)||z<0){return null}w=A.indexOf(";",v);if(w<0){w=A.length}return m(A.substring(v,w))},remove:function(v){var x=o.get(v),w={expires:s};q.cookie=k(v,"",w);return x},keys:function(){var A=q.cookie,z=A.split("; "),w,y,x=[];for(var v=0;v<z.length;v++){y=z[v].split("=");x.push(m(y[0]))}return x},all:function(){var A=q.cookie,z=A.split("; "),w,y,x=[];for(var v=0;v<z.length;v++){y=z[v].split("=");x.push([m(y[0]),m(y[1])])}return x},version:"0.2.1",enabled:false};o.enabled=p.call(o);return o}());var c=(function(){if(Array.prototype.indexOf){return function(k,l){return Array.prototype.indexOf.call(k,l)}}else{return function(p,q){var o,n;for(var m=0,k=p.length;m<k;m++){if(p[m]==q){return m}}return -1}}})();e=function(){};g=function(k){return"PS"+k.replace(/_/g,"__").replace(/ /g,"_s")};var a={search_order:["localstorage","globalstorage","gears","cookie","ie","flash"],name_re:/^[a-z][a-z0-9_ \-]+$/i,methods:["init","get","set","remove","load","save","iterate"],sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?",keys:"SELECT * FROM persist_data"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:true}}};b={gears:{size:-1,test:function(){return(window.google&&window.google.gears)?true:false},methods:{init:function(){var k;k=this.db=google.gears.factory.create("beta.database");k.open(g(this.name));k.execute(a.sql.create).close()},get:function(m){var n,o=a.sql.get;var k=this.db;var l;k.execute("BEGIN").close();n=k.execute(o,[m]);l=n.isValidRow()?n.field(0):null;n.close();k.execute("COMMIT").close();return l},set:function(n,q){var l=a.sql.remove,p=a.sql.set,o;var k=this.db;var m;k.execute("BEGIN").close();k.execute(l,[n]).close();k.execute(p,[n,q]).close();k.execute("COMMIT").close();return q},remove:function(l){var m=a.sql.get;sql=a.sql.remove,r,val=null,is_valid=false;var k=this.db;k.execute("BEGIN").close();k.execute(sql,[l]).close();k.execute("COMMIT").close();return true},iterate:function(n,m){var l=a.sql.keys;var o;var k=this.db;o=k.execute(l);while(o.isValidRow()){n.call(m||this,o.field(0),o.field(1));o.next()}o.close()}}},globalstorage:{size:5*1024*1024,test:function(){if(window.globalStorage){var k="127.0.0.1";if(this.o&&this.o.domain){k=this.o.domain}try{var m=globalStorage[k];return true}catch(l){if(window.console&&window.console.warn){console.warn("globalStorage exists, but couldn't use it because your browser is running on domain:",k)}return false}}else{return false}},methods:{key:function(k){return g(this.name)+g(k)},init:function(){this.store=globalStorage[this.o.domain]},get:function(k){k=this.key(k);return this.store.getItem(k)},set:function(k,l){k=this.key(k);this.store.setItem(k,l);return l},remove:function(k){var l;k=this.key(k);l=this.store.getItem[k];this.store.removeItem(k);return l}}},localstorage:{size:-1,test:function(){return window.localStorage?true:false},methods:{key:function(k){return this.name+">"+k},init:function(){this.store=localStorage},get:function(k){k=this.key(k);return this.store.getItem(k)},set:function(k,l){k=this.key(k);this.store.setItem(k,l);return l},remove:function(k){var l;k=this.key(k);l=this.store.getItem(k);this.store.removeItem(k);return l},iterate:function(n,m){var k=this.store;for(i=0;i<k.length;i++){keys=k[i].split(">");if((keys.length==2)&&(keys[0]==this.name)){n.call(m||this,keys[1],k[k[i]])}}}}},ie:{prefix:"_persist_data-",size:64*1024,test:function(){return window.ActiveXObject?true:false},make_userdata:function(l){var k=document.createElement("div");k.id=l;k.style.display="none";k.addBehavior("#default#userdata");document.body.appendChild(k);return k},methods:{init:function(){var k=b.ie.prefix+g(this.name);this.el=b.ie.make_userdata(k);if(this.o.defer){this.load()}},get:function(k){var l;k=g(k);if(!this.o.defer){this.load()}l=this.el.getAttribute(k);return l},set:function(k,l){k=g(k);this.el.setAttribute(k,l);if(!this.o.defer){this.save()}return l},remove:function(k){var l;k=g(k);if(!this.o.defer){this.load()}l=this.el.getAttribute(k);this.el.removeAttribute(k);if(!this.o.defer){this.save()}return l},load:function(){this.el.load(g(this.name))},save:function(){this.el.save(g(this.name))}}},cookie:{delim:":",size:4000,test:function(){return d.Cookie.enabled?true:false},methods:{key:function(k){return this.name+b.cookie.delim+k},get:function(k,l){var m;k=this.key(k);m=f.get(k);return m},set:function(k,m,l){k=this.key(k);f.set(k,m,this.o);return m},remove:function(k,l){var l;k=this.key(k);l=f.remove(k);return l}}},flash:{test:function(){if(!deconcept||!deconcept.SWFObjectUtil){return false}var k=deconcept.SWFObjectUtil.getPlayerVersion().major;return(k>=8)?true:false},methods:{init:function(){if(!b.flash.el){var n,l,m,k=a.flash;m=document.createElement("div");m.id=k.div_id;document.body.appendChild(m);n=new deconcept.SWFObject(this.o.swf_path||k.path,k.id,k.size.w,k.size.h,"8");for(l in k.args){if(k.args[l]!="function"){n.addVariable(l,k.args[l])}}n.write(m);b.flash.el=document.getElementById(k.id)}this.el=b.flash.el},get:function(k){var l;k=g(k);l=this.el.get(this.name,k);return l},set:function(l,m){var k;l=g(l);k=this.el.set(this.name,l,m);return k},remove:function(k){var l;k=g(k);l=this.el.remove(this.name,k);return l}}}};h=function(){var o,k,q,t,u=a.methods,v=a.search_order;for(var s=0,p=u.length;s<p;s++){d.Store.prototype[u[s]]=e}d.type=null;d.size=-1;for(var n=0,m=v.length;!d.type&&n<m;n++){q=b[v[n]];if(q.test()){d.type=v[n];d.size=q.size;for(t in q.methods){d.Store.prototype[t]=q.methods[t]}}}d._init=true};d={VERSION:j,type:null,size:0,add:function(k){b[k.id]=k;a.search_order=[k.id].concat(a.search_order);h()},remove:function(l){var k=c(a.search_order,l);if(k<0){return}a.search_order.splice(k,1);delete b[l];h()},Cookie:f,Store:function(k,l){if(!a.name_re.exec(k)){throw new Error("Invalid name")}if(!d.type){throw new Error("No suitable storage found")}l=l||{};this.name=k;l.domain=l.domain||location.hostname||"localhost";l.domain=l.domain.replace(/:\d+$/,"");l.domain=(l.domain=="localhost")?"":l.domain;this.o=l;l.expires=l.expires||365*2;l.path=l.path||"/";this.init()}};h();return d})();