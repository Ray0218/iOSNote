var relatedSucess=false;var discussionsSucess=false;KmLoader.relatedElements=new Array();KmLoader.discussionsElements=new Array();String.prototype.lengthInPixel=function(){var a=$("__ruler");a.innerHTML=this;return a.offsetWidth};String.prototype.trimToPixel=function(b){var a=this;var c=this;if(a.lengthInPixel()>b){c+="...";while(c.lengthInPixel()>b){a=a.substring(0,a.length-1);c=a+"..."}}return c};Event.observe(window,"load",function(){KmLoader.success=function(q,o){console.log("RequestId:"+o);console.log("JSON length: "+q.results.length);var p=document.getElementById("showRelatedArticles").value;var r=document.getElementById("showRelatedDiscussions").value;if(o==1){relatedSucess=true}else{if(o==2){discussionsSucess=true}}var h=KmLoader.getDiv(o);var m=$(h);var l=$(h);if(document.getElementById("mobile-opt-in-link")){if($("__ruler")==null){var g=new Element("span",{id:"__ruler",style:"visibility: hidden; white-space: nowrap; font-size:10px;line-height: 1.3em;"});document.getElementsByTagName("body")[0].insertBefore(g,document.getElementById("mobile-opt-in-link"))}}else{if($("__ruler")==null){var g=new Element("span",{id:"__ruler",style:"visibility: hidden; white-space: nowrap; font-size:10px;line-height: 1.3em;"});$$("body")[0].insert(g)}}if(q==undefined||q==null){}else{if(q.results.length>0){var c=h=="related_discussions"?70:100;var b=162;var f=h=="related_discussions"?b*2:b*3;for(i=0;i<q.results.length;i++){var a=((h=="related_articles"||h=="related_hotdiscussions")&&ACUtil.trim(q.results[i].title).substring(0,60)==ACUtil.trim($("main-title").innerHTML).substring(0,60))?false:true;if(a){var t=q.results[i].title;var k="";if(KmLoader.isOmnitureSupported=="true"&&(h=="related_articles"||h=="related_discussions")){var j=q.results[i].url;if(j.lastIndexOf("/kb")>-1){j="kb/"+j.match(/\/kb\/([a-zA-Z]{2}[0-9]*)/)[1]}else{if(j.lastIndexOf("/thread")>-1){j="thread/"+j.match(/\/thread\/([0-9]*)/)[1]}}var n=s.prop2.split("-");var d=ACUtil.trim(n[0]);k="ACUtil.trackRelatedArticles('"+d+"','"+j+"')"}if((KmLoader.channel!=null)&&((KmLoader.channel==="HOWTO_ARTICLES")||(KmLoader.channel==="TROUBLESHOOTING_ARTICLES"))){var e="<li><a href='"+q.results[i].url+"' onclick=\"s_objectID='"+q.results[i].url+"_p"+o+"-"+i+"';"+k+"\"><h3 class='relatedTitle'>"+t+"</h3></a><p>"+q.results[i].excerpt+"</p></li>"}else{var e="<li><a href='"+q.results[i].url+"' onclick=\"s_objectID='"+q.results[i].url+"_p"+o+"-"+i+"';"+k+"\"><h5 class='relatedTitle'>"+t+"</h5></a><p>"+q.results[i].excerpt+"</p></li>"}if(o=="1"&&p=="true"){KmLoader.relatedElements.push(e)}else{if(o=="2"&&r=="true"){KmLoader.discussionsElements.push(e)}}}}}}};KmLoader.error=function(c,d){if(d=="1"){$("articleError").value=true}else{if(d=="2"){$("discussionError").value=true}}var b=$(KmLoader.getDiv(d));var a=$("outer_"+KmLoader.getDiv(d))};KmLoader.getDiv=function(b){var a;if(b==1){a="related_articles"}else{if(b==2){a="related_discussions"}else{if(b==3){a="related_hotdiscussions"}else{if(b==4){a="related_videos"}}}}return a}});